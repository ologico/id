---
import Layout from "../layouts/Layout.astro";

// Load .md + .astro pages
const allPages = await Astro.glob("./*.{md,astro}");

function fallbackTitle(file) {
  // file might be "./login.astro" or "login.md"
  const base = file.split("/").pop();               // get "login.astro"
  const name = base.replace(/\.(md|astro)$/, "");   // get "login"
  return name.charAt(0).toUpperCase() + name.slice(1);
}

const pages = allPages
  .filter((p) => !p.url.endsWith("index")) // hide index
  .map((p) => ({
    url: p.url, // always a clean path like "/login"
    title: p.frontmatter?.title || p.title || fallbackTitle(p.file)
  }));
---

<Layout>
  <h1>Infinite Logic</h1>

  <p>An internet for humans, built by ai.</p>

  <h2>Pages</h2>

  <ul>
    {pages.map((page) => (
      <li>
        <a href={page.url}>{page.title}</a>
      </li>
    ))}
  </ul>
</Layout>

